\tikzstyle{service}=[rounded corners,rectangle,draw,inner sep=2mm,fill=gray!40]
\pgfdeclarelayer{db-background}
\pgfdeclarelayer{background}
\pgfsetlayers{background,db-background,main}
\scalebox{0.75}{
  \begin{tikzpicture}
    \node at (0,5.5) { \large{\textbf{Plug-ins}} };
    \node [matrix of nodes,rectangle,draw,column sep=4mm,inner sep=2.5mm] 
    (analyzers) at (8,5.5) {
      \node [service] (a1) at (0,0) { Analyzer 1 }; \pgfmatrixnextcell
      \node [service] (a2) at (0,0) { Analyzer 2 }; \pgfmatrixnextcell
      \node [service] (a3) at (0,0) { Analyzer 3 }; \pgfmatrixnextcell
      \node [service] (a5) at (0,0) { \vphantom{Analyzer} \ldots }; \\
    };
    \node[inner sep=0.4mm] (db-plugins) at (8,3.7) {Plug-ins Database };
    \node[] (db-kernel) at (db-plugins) {};
    \begin{pgfonlayer}{db-background}
      \node[service,ellipse,fit=(db-plugins)(db-kernel),inner sep=1.2mm] (db){};
    \end{pgfonlayer}
    \node at (0,2.35) { \large{\textbf{Kernel Services}} };
    \begin{pgfonlayer}{background}
      \node [matrix of nodes,rectangle,draw,row sep=4mm,inner sep=2mm] 
      (services) at (8,2.35) {
        \node [inner sep=6mm] at (0,0) {};
        \node [service] (message) at (0,-0.3) { Message };
        \pgfmatrixnextcell
        \node [service] (printer) at (0,-0.3) { Printer };
        \pgfmatrixnextcell
        \node [service] (status) at (0,-0.3) { Property Status };
        \pgfmatrixnextcell \\
        \node [service] (journal) at (1,0) { Journal };
        \pgfmatrixnextcell
        \node [service] (parameter) at (1,0) { Parameter };
        \pgfmatrixnextcell
        \node [service] (project) at (0.1,0) { Project };
        \pgfmatrixnextcell 
        \node [service] (others) at (0.1,0) { \vphantom{Project} \dots};
        \pgfmatrixnextcell\\
      };
    \end{pgfonlayer}
    \node at (0,-0.2) { \large{\textbf{(Modified) \cil}} };
    \node [service,diamond,aspect=3,inner sep=1mm] (ast) at (8,-0.2) {
      C + \textsc{Acsl} AST };
    \path [->,thick] (5,3.73) edge[bend left=30] (5,4.87);
    \path [->,thick] (11.5,3.73) edge[bend right=30] (11.5,4.87);
    \path [->,thick] (analyzers) edge (db);
    \path [<->,thick] (ast) edge (services);
  \end{tikzpicture}
}
