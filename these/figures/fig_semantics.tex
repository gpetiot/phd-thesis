\begin{figure}[h!]
  \begin{tabular}{rcll}
    \comp{$T~\mathit{id}\semicolon$}{$(\env, \store)$}
    &=& ($\env$[$\mathit{id}\mapsto$ $\loc$], $\store$)
    où $\loc$ est une adresse fraîche & \eqlabel{C-decl} \\
    \comp{$\mathit{x}$ \lstinline'=' $e\semicolon$}{$(\env, \store)$}
    &=&
    ($\env, \store$[$\env(\mathit{x}) \mapsto$ \eval{$e$}{$(\env, \store)$}])
    & \eqlabel{C-set} \\

    \comp{$\mathit{x}$\lstinline'['$\mathit{e}$\lstinline']'
      \lstinline'=' $e_2\semicolon$}{$(\env, \store)$}
    &=& ($\env, \store[\env(\mathit{x}$
      \lstinline'['\eval{$\mathit{e}$}{$(\env, \store)$}\lstinline']') $\mapsto$
      \eval{$e_2$}{$(\env, \store)$}])
    & \eqlabel{C-set-2} \\

    \comp{$\Zinit$ \underline{$\mathit{x}$ \lstinline'=' $e$} $\semicolon$}{
      $(\env, \store)$}
    &=& ($\env, \store[\env(\mathit{x}) \mapsto$
      \eval{$\underline{e}$}{$(\env, \store)$}])
    & \eqlabel{C-Z-set} \\

    %% \comp{$\Zinit$ \underline{$\mathit{x}$\lstinline'['$\mathit{e}$\lstinline']'
    %%   \lstinline'=' $e_2$} $\semicolon$}{$(\env, \store)$}
    %% &=& ($\env, \store[\env(\mathit{x}$
    %%   \lstinline'['\eval{$\mathit{e}$}{$(\env, \store)$}\lstinline']') $\mapsto$
    %%   \eval{$\underline{e_2}$}{$(\env, \store)$}])
    %% & \eqlabel{C-Z-set-2} \\

    \comp{\underline{$\mathit{x}$} $\Zclear \semicolon$}{$(\env, \store)$}
    &=& ($\env[\mathit{x} \mapsto \bot], \store[\env(\mathit{x}) \mapsto \bot]$)
    & \eqlabel{C-Z-unset} \\

    \comp{\lstinline'fassert('$e$\lstinline');'}{$\mem$}
    &=& $\mem$ si (\eval{$e$}{$\mem$}) $\neq 0$, $\errormem$ sinon
    & \eqlabel{C-fassert} \\

    \comp{\lstinline'fassume('$e$\lstinline');'}{$\mem$}
    &=& $\mem$ si (\eval{$e$}{$\mem$}) $\neq 0$
    & \eqlabel{C-fassume} \\

    \comp{$\mathit{lv}$\lstinline'= fvalid('$e$\lstinline');'}{$(\env, \store)$}
    &=&
    $(\env, \store[\env(\mathit{lv}) \mapsto 1]$)
    si $\store($\eval{$e$}{$(\env, \store)$}$) \in LOC$,
    & \eqlabel{C-fvalid} \\
    && $(\env, \store[\env(\mathit{lv}) \mapsto 0])$ sinon & \\

    \comp{$\mathit{lv}$ \lstinline'= fvalidr('$e_1$,$e_2$,$e_3$
      \lstinline');'}{$(\env, \store)$}
    &=& $(\env, \store[\env(\mathit{lv}) \mapsto 1])$ si
    $\store($\eval{$e_1+e_2$}{$(\env, \store)$}$) \in LOC$
    & \eqlabel{C-fvalidr} \\
    && $\land \cdots \land$ $\store($\eval{$e_1+e_3$}{$(\env, \store)$}$) \in LOC$,
    &\\
    & & $(\env, \store[\env(\mathit{lv}) \mapsto 0])$ sinon & \\

    \comp{$\mathit{id}$ \lstinline' = malloc('$e$\lstinline');'}{$(\env, \store)$}
    &=&
    $(\env[\mathit{id}$\lstinline'[0]' $\mapsto \loc_1$, ...,
      $\mathit{id}$\lstinline'['\eval{$n$}{$(\env, \store)$}\lstinline'-1]'
      $\mapsto \loc_N]$,
    & \eqlabel{C-malloc} \\
    && $\store[\env(\mathit{id}) \mapsto \env(\mathit{id}$\lstinline'[0]'$)])$
    &\\
    && où $\loc_1, ..., \loc_N$ sont des adresses fraîches &\\

    \comp{\lstinline'free('$\mathit{id}$\lstinline')'}{$(\env, \store)$}
    &=&
    $(\env[\mathit{id}$\lstinline'[0]' $\mapsto \bot$, ...,
      $\mathit{id}$\lstinline'['\eval{$n$}{$(\env, \store)$}\lstinline'-1]'
      $\mapsto \bot]$,
    & \eqlabel{C-free} \\
    && $\store[\env(\mathit{id}) \mapsto \bot])$ &\\

    \comp{$f$\lstinline'('$e_1$,...,$e_N$\lstinline');'}{$(\env, \store)$} &=&
    $\mathcal{F} \llbracket$ $f$\lstinline'('$\mathit{id_1}$,...,$\mathit{id_N}$
    \lstinline')' $\bopen ... \bclose \rrbracket$ & \eqlabel{C-fct1} \\
    && $(\env[\mathit{id_1} \mapsto \loc_1$, ...,
      $\mathit{id_N} \mapsto \loc_N],$ &\\
    && $\store[\loc_1 \mapsto$ \eval{$e_1$}{$(\env, \store)$}, ...,
       $\loc_N \mapsto$ \eval{$e_N$}{$(\env, \store)$} $])$ &\\
    && où $\loc_1, ..., \loc_N$ sont des adresses fraîches &\\

    \comp{$\mathit{lv}$ \lstinline'=' $f$\lstinline'('$e_1$,...,$e_N$
      \lstinline');'}{$(\env, \store)$} &=&
    $(\env, \store[\env(\mathit{lv}) \mapsto$
      \eval{\lstinline'res'}{$(\env', \store')$}$])$
    & \eqlabel{C-fct2} \\
    && où $(\env'$, $\store')$ =
    $\mathcal{F} \llbracket$ $f$\lstinline'('$\mathit{id_1}$,...,$\mathit{id_N}$
    \lstinline')' $\bopen ... \bclose \rrbracket$ &\\
    && $(\env[\mathit{id_1} \mapsto \loc_1$, ...,
      $\mathit{id_N} \mapsto \loc_N],$ &\\
    && $\store[\loc_1 \mapsto$ \eval{$e_1$}{$(\env, \store)$}, ...,
      $\loc_N \mapsto$ \eval{$e_N$}{$(\env, \store)$}
    $])$ &\\
    && où $\loc_1, ..., \loc_N$ sont des adresses fraîches &\\

    \comp{\lstinline'return res;'}{$\mem$}
    &=& $\mem$ & \eqlabel{C-return} \\

    \comp{\lstinline'if('$e$\lstinline')' $\bopen A \bclose$
      \lstinline'else' $\bopen B \bclose$}{$\mem$}
    &=& \comps{$A$}{$\mem$} si (\eval{$e$}{$\mem$})
    $\neq 0$, \comps{$B$}{$\mem$} sinon & \eqlabel{C-if} \\

    \comp{\lstinline'/*@ assert' $p\semicolon$ \lstinline' */'}{$\mem$}
    &=& $\mem$ si (\eval{$p$}{$\mem$}), $\errormem$ sinon
    & \eqlabel{C-assert} \\
    \multicolumn{4}{l}{
      \comp{
        \lstinline'/*@ loop invariant' $p\semicolon$
        \lstinline'loop assigns' $X\semicolon$
        \lstinline'loop variant' $t\semicolon$
        \lstinline'*/ while(' $e$ \lstinline')'
        $\bopen A \bclose$}{$\mem$}
    } \\
    & = & $\errormem$ si $\lnot$ \eval{$p$}{$\mem$} & \eqlabel{C-while-1} \\
    &  & $\mem$ si (\eval{$e$}{$\mem$}) $= 0$ & \eqlabel{C-while-2} \\
    &  & $\errormem$ si (\eval{$t$}{$\mem$}) $< 0$ & \eqlabel{C-while-3} \\
    &  & $\errormem$ si $\lnot$ \eval{$p$}{(\comps{$A$}{$\mem$})}
    & \eqlabel{C-while-4} \\
    &  & $\errormem$
    si (\eval{$t$}{(\comps{$A$}{$\mem$})}) $\ge$ (\eval{$t$}{$\mem$})
    & \eqlabel{C-while-5} \\
    &  & $\errormem$ si
    $\exists x. (x \in G-X.$
    (\eval{$x$}{(\comps{$A$}{$\mem$})}) $\ne$ (\eval{$x$}{$\mem$}) $)$
    & \eqlabel{C-while-6} \\
    &  & \comp{\lstinline'/*@ ... */ while('$e$\lstinline')'
      $\bopen A \bclose$}{(\comps{$A$}{$\mem$})} sinon
    & \eqlabel{C-while-7} \\
  \end{tabular}
  \caption{Sémantique dénotationnelle des instructions}
  \label{fig:sem-instr}
\end{figure}
